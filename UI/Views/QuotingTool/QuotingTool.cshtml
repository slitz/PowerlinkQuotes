@using UI.Models
@model QuotingToolModel

@{
    ViewBag.Title = "Index";
}

@using (Html.BeginForm())
{
    <section class="container">
        <div class="row" id="stations-selector">
            <div class="col-md-12">
                <div class="tab-pane fade in active">
                    <div class="container-fluid">
                        <h4 class="qualification-title">Select Stations</h4>
                        <div>
                            @Html.ListBoxFor(m => m.SelectedProductsList, Model.ProductDataList, new Dictionary<string, object>() {{"class", "form-control"}, 
                                {"style", "width:100%;height:150px"}, {"id", "stations-listbox"}})
                        </div>
                        <br />
                        <div class="container-fluid" style="height: 55px;margin-bottom:0;text-align:center">
                           <input type="submit" id="add-stations-btn" class="btn btn-primary" value="Add Selected Stations" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
}

<section class="container">
    <div class="row" id="kits-selector" style="visibility:hidden">
        <div class="col-md-12">
            <div class="tab-pane fade in active">
                <div class="container-fluid">
                    <h4 class="qualification-title">Add Kits</h4>
                    <div>
                        @Html.ListBoxFor(m => m.SelectedKitsList, Model.KitDataList, new Dictionary<string, object>() {{"class", "form-control"}, 
                            {"style", "width:100%;height:150px"}, {"id", "kits-listbox"}})
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="container">
    <div class="row" id="stations">
        <div class="col-md-12">
            <div class="tab-pane fade in active">
                <div class="container-fluid">
                    <h4 class="qualification-title">Set Quantities</h4>
                    <table id="stations-table" class="table table-striped table-bordered table-hover dataTable no-footer dtr-inline" style="float:none">
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Description</th>
                                    <th style="text-align:center">Price</th>
                                    <th style="text-align:center">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                            @* populate dynamically *@
                            </tbody>
                        </table>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="container">
    <nav id="next-nav-panel" class="navbar navbar-default" style="padding:0;visibility:hidden">
        <div class="container-fluid" style="padding-top:8px">
            <div class="navbar-header" style="float:right">
                <div id="navbar" class="navbar-collapse collapse">
                    <input type="submit" id="next-btn" class="btn btn-default" style="float:right" value="Next >>"/>
                </div>
            </div>
        </div>
    </nav>
</section>

@section scripts
{
    <script type="text/javascript">
        $(document).ready(function () {

            document.getElementById("stations").style.display = "none";
            document.getElementById("kits-selector").style.display = "none";
            document.getElementById("stations-nav-text").style.fontWeight = "bold";

            var stationsTableData = @Html.Raw(Json.Encode(Model.SelectedProductsData));

            if(stationsTableData != null)
            {
                if(stationsTableData.length > 0)
                {
                    document.getElementById("stations").style.display = "block";
                    document.getElementById("next-nav-panel").style.visibility = "visible";
                }

                var stationsTableBodyRowsHtml = "<tr class='odd-table-row'><td class='text-center' colspan=3>No data found</tr></td>";
                var stationsTableBody = $("#stations-table tbody");
                if (stationsTableData.length > 0) {
                    stationsTableBodyRowsHtml = "";
                }
                for (var i = 0; i < stationsTableData.length; i++) {
                    var stationsTableRowHtml = "<tr><td>" + stationsTableData[i].OrderCode + "</td><td>" + 
                        stationsTableData[i].Description + "</td><td style='text-align:center'>" + stationsTableData[i].Price + 
                        "</td><td style='text-align:center'><input type='test' value='1' style='width:50px;text-align:center;border-color:lightgray'</td></ tr>";
                    stationsTableBodyRowsHtml += stationsTableRowHtml;
                }

                stationsTableBody.html(stationsTableBodyRowsHtml);
            }

            $("#stations-nav-text").click(function(e) {
                document.getElementById("stations-selector").style.display = "block";
                document.getElementById("kits-selector").style.display = "none";
                document.getElementById("stations-nav-text").style.fontWeight = "bold";
                document.getElementById("kits-nav-text").style.fontWeight = "normal";
            });

            $("#kits-nav-text").click(function(e) {
                document.getElementById("kits-selector").style.display = "block";
                document.getElementById("stations-selector").style.display = "none";
                document.getElementById("kits-nav-text").style.fontWeight = "bold";
                document.getElementById("stations-nav-text").style.fontWeight = "normal";
            });

        })
    </script>
}